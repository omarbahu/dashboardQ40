@{
    ViewData["Title"] = "Detalle del reporte de trazabilidad";
    Layout = "~/Views/Shared/_Layout.cshtml";
    @model FormatoViewModel    
}

<style>
    .traza-bloque {
        border-collapse: collapse;
        width: 100%;
        font-size: 12px;
        table-layout: fixed;
    }

        .traza-bloque th, .traza-bloque td {
            border: 1px solid #666;
            padding: 4px;
            text-align: center;
            vertical-align: middle;
            word-wrap: break-word;
        }

        .traza-bloque th {
            background-color: #cfe2f3;
            font-weight: bold;
        }

    .titulo-reporte {
        text-align: center;
        font-size: 14px;
        font-weight: bold;
        padding: 8px;
        background-color: #fff2cc;
        border: 1px solid #666;
    }

    .encabezado-subtitulo {
        font-weight: bold;
        background-color: #daeef3;
    }

    details {
        margin-bottom: 10px;
        border: 1px solid #ccc;
        padding: 5px;
    }

    summary {
        font-weight: bold;
        cursor: pointer;
        padding: 5px;
        background-color: #e2f0d9;
        border-bottom: 1px solid #ccc;
    }


    .tabla-trazabilidad {
        border-collapse: collapse;
        width: 100%;
        font-size: 13px;
        font-family: sans-serif;
    }

        .tabla-trazabilidad th,
        .tabla-trazabilidad td {
            border: 1px solid #333;
            padding: 4px;
            text-align: center;
            vertical-align: middle;
        }

    .bg-header {
        background-color: #d9edf7;
        font-weight: bold;
    }

    .bg-subheader {
        background-color: #c6e2f7;
        font-weight: bold;
    }

    .bg-label {
        background-color: #f2f2f2;
        font-weight: bold;
        text-align: left;
        padding-left: 6px;
    }
</style>




<div class="container-fluid mt-4 px-4">
    <table class="traza-bloque">
        <tr>
            <td rowspan="2"><img src="/img/logo arca contal.png" alt="Logo Arca" height="40" /></td>
            <td colspan="5" class="titulo-reporte">Bebidas Mundiales – Planta Insurgentes</td>
            <td rowspan="2" class="encabezado-subtitulo">EDICIÓN:<br>15/NOV/2024</td>
        </tr>
        <tr>
            <td colspan="5" style="text-align:center;">MX-INS-CDS-MFA-SG-F-036 &nbsp; Reporte de Ejercicio de Trazabilidad</td>
        </tr>        
        <tr>
            <th>FECHA</th>
            <th>HORA DE INICIO</th>
            <th>HORA DE TÉRMINO</th>
            <th>TIEMPO TOTAL DEL EJERCICIO</th>
            <th>MOTIVO DE LA TRAZABILIDAD</th>
            <th>¿LA TRAZABILIDAD APLICA A RETIRO DE PRODUCTO TERMINADO / MATERIA PRIMA?</th>
            <th>% DE EFICACIA DE RETIRO DE PRODUCTO (EN CASO DE QUE APLIQUE)</th>
        </tr>
        <tr>
            <td>15/NOV/2024</td>
            <td>08:04</td>
            <td>17:20</td>
            <td>09:26</td>
            <td>Se detecta olor y sabor no característico en Joya Durazno 1.5L</td>
            <td>Sí</td>
            <td>3.85%</td>
        </tr>            
    </table>

    <!-- Nav tabs -->
    <ul class="nav nav-tabs" id="trazabilidadTabs" role="tablist">
        @{
            var secciones = new[] {
        "Formato", "Materias primas", "Jarabes", "Embotellado", "Tratamiento de agua",
        "Producción", "Limpieza", 
        };
            for (int i = 0; i < secciones.Length; i++)
            {
                var sec = secciones[i];
                var tabId = sec.Replace(" ", "").ToLower();
                <li class="nav-item" role="presentation">
                    <button class="nav-link @(i == 0 ? "active" : "")" id="@tabId-tab" data-bs-toggle="tab" data-bs-target="#@tabId" type="button" role="tab">@sec</button>
                </li>
            }
        }
    </ul>

    <!-- Tab panes -->
    <div class="tab-content mt-3">
        @{
            for (int i = 0; i < secciones.Length; i++)
            {
                var sec = secciones[i];
                var tabId = sec.Replace(" ", "").ToLower();
                <div class="tab-pane fade @(i == 0 ? "show active" : "")" id="@tabId" role="tabpanel">
                    <div id="collapse-@tabId" class="accordion-collapse collapse show">
                        <div class="accordion-body">
                            @{
                                string partialViewName = null;

                                switch (sec)
                                {
                                    case "Materias primas":
                                        partialViewName = "~/Views/TrazabilidadAuditoria/Partials/_TabMP.cshtml";
                                        break;
                                    case "Jarabes":
                                        partialViewName = "~/Views/TrazabilidadAuditoria/Partials/_TabFormato.cshtml";
                                        break;
                                    case "Formato":

                                        partialViewName = "~/Views/TrazabilidadAuditoria/Partials/_TabFormato.cshtml";
                                        break;
                                            
                                    // ... y así para cada sección ...
                                    default:
                                        partialViewName = "~/Views/TrazabilidadAuditoria/Partials/_TabFormato.cshtml";
                                        break;
                                }
                                <!-- Aquí van los inputs, grids o formularios -->
                                if (partialViewName != null)
                                {
                                    @await Html.PartialAsync(partialViewName, Model)                                
                                }
                                else
                                {
                                <p><i>Contenido pendiente para "@sec"</i></p>
                                }
                            }
                        </div>
                    </div>
                </div>
            }
        }
    </div>
</div>


@section Scripts {
    <script>
       
    </script>
}


